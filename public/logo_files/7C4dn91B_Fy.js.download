;/*FB_PKG_DELIM*/

__d("CometMessagingChatTabErrorState.react",["MWInboxErrorState.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={cardWidth:{width:"x1cvmir6",$$css:!0},errorBoundary:{height:"x5yr21d",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(3);a=a.error;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=[j.cardWidth,j.errorBoundary],b[0]=e):e=b[0];b[1]!==a?(e=i.jsx(c("MWInboxErrorState.react"),{error:a,plural:!1,source:"fb_chat_tab",xstyle:e}),b[1]=a,b[2]=e):e=b[2];return e}g["default"]=a}),98);
__d("LSLocalCreateOptimisticGroupThreadStoredProcedure",["LSLocalCreateOptimisticGroupThread","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSLocalCreateOptimisticGroupThread"),e.participants,e.nullstateDescriptionText,e.threadName,e.checkExistingThreads,e.threadMetadata);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWChatTabInThreadBanner_query.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MAWChatTabInThreadBanner_query",selections:[{args:null,kind:"FragmentSpread",name:"MWEBChatTabBannerNux_query"}],type:"Query",abstractKey:null};e.exports=a}),null);
__d("MWEBChatTabBannerNux_query.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider"}],kind:"Fragment",metadata:null,name:"MWEBChatTabBannerNux_query",selections:[{args:null,kind:"FragmentSpread",name:"useEncryptedBackupsProcessStatePreLoaded_query"},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{condition:"__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_new_user_onboarding_upsells",plural:!1,selections:[{args:null,documentName:"MWEBChatTabBannerNux_query",fragmentName:"MWEBNewUserOnboardingChatTabQP_viewer",fragmentPropName:"viewer",kind:"ModuleImport"}],storageKey:null}]}],storageKey:null}],type:"Query",abstractKey:null};e.exports=a}),null);
__d("MWEBChatTabBannerNux.react",["CometPlaceholder.react","CometRelay","JSResourceForInteraction","MWChatEncryptedBackupsQPLSource.enum","MWEBChatTabBannerNux_query.graphql","MWEBEntrypointsKillswitch.enum","MWEBMobileOnboardingEligibility","MWEncryptedBackupsThreadListQPWrapper.react","cr:20045","react","react-compiler-runtime","useEncryptedBackupsProcessStatePreLoaded"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k=d("MWEBMobileOnboardingEligibility").requireMobileOnboardingIfEligible(c("JSResourceForInteraction")("MWEBMobileOnboardingQPBannerWrapper.react").__setRef("MWEBChatTabBannerNux.react"));function a(a){var e=d("react-compiler-runtime").c(7);a=a.query;a=d("CometRelay").useFragment(h!==void 0?h:h=b("MWEBChatTabBannerNux_query.graphql"),a);var f;e[0]!==a?(f={entrypoint:c("MWEBEntrypointsKillswitch.enum").NOT_AN_ENTRYPOINT_NO_KILLSWITCH_APPLICABLE,query:a},e[0]=a,e[1]=f):f=e[1];f=c("useEncryptedBackupsProcessStatePreLoaded")(f);switch(f){case 2:if(((f=a.viewer)==null?void 0:f.if_viewer_can_see_messenger_eb_new_user_onboarding_upsells)!=null){a=(f=a.viewer)==null?void 0:f.if_viewer_can_see_messenger_eb_new_user_onboarding_upsells;e[2]===Symbol["for"]("react.memo_cache_sentinel")?(f={},e[2]=f):f=e[2];e[3]!==a?(f=j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(d("CometRelay").MatchContainer,{match:a,props:f})}),e[3]=a,e[4]=f):f=e[4];return f}if(b("cr:20045")!=null){e[5]===Symbol["for"]("react.memo_cache_sentinel")?(a=j.jsx(b("cr:20045"),{children:null,source:c("MWChatEncryptedBackupsQPLSource.enum").CHAT_TAB_ONBOARDING_QP}),e[5]=a):a=e[5];return a}e[6]===Symbol["for"]("react.memo_cache_sentinel")?(f=j.jsx(k,{fallback:null,props:{children:null,source:c("MWChatEncryptedBackupsQPLSource.enum").CHAT_TAB_ONBOARDING_QP,trigger:d("MWEncryptedBackupsThreadListQPWrapper.react").MWEncryptedBackupsQPTrigger.CHAT_TAB}}),e[6]=f):f=e[6];return f;default:return null}}g["default"]=a}),98);
__d("MAWChatTabInThreadBanner.react",["CometPlaceholder.react","CometRelay","MAWChatTabInThreadBanner_query.graphql","MWEBChatTabBannerNux.react","cr:9715","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){var e=d("react-compiler-runtime").c(3);a=a.query;a=d("CometRelay").useFragment(h!==void 0?h:h=b("MAWChatTabInThreadBanner_query.graphql"),a);if(b("cr:9715")&&c("gkx")("1778")){var f;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=j.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MAWInThreadBannerNuxReqCondWrapper",children:j.jsx(b("cr:9715"),{hasNoMargin:!0})}),e[0]=f):f=e[0];return f}else{e[1]!==a?(f=j.jsx(c("MWEBChatTabBannerNux.react"),{query:a}),e[1]=a,e[2]=f):f=e[2];return f}}g["default"]=a}),98);
__d("MAWCreateOptimisticSecureThread",["FBLogger","I64","LSAuthorityLevel","LSFactory","LSGroupParticipantJoinState","LSIntEnum","MAWVerifyThreadExistsUtils","Promise","ReQLTable"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,b){return d("MAWVerifyThreadExistsUtils").runVerifyThreadExistsSproc(c("LSFactory")(a),{authorityLevel:(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),threadType:b},"createSecureOccamadilloOptimisticThread").then(function(b){var e=b[0];return d("ReQLTable").update(a.threads,[e],function(a){if(a==null)throw c("FBLogger")("maw_threads").mustfixThrow("Optimistic thread is missing");return babelHelpers["extends"]({},a,{clientThreadKey:e})}).then(function(){return e})})}function a(a,e,f){return k(a,f).then(function(f){return(h||(h=b("Promise"))).all(e.map(function(b){return a.participants.add({authorityLevel:(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),contactId:b.id,deliveredWatermarkTimestampMs:(i||(i=d("I64"))).zero,groupParticipantJoinState:j.ofNumber(c("LSGroupParticipantJoinState").MEMBER),isAdmin:void 0,isModerator:!1,isSuperAdmin:void 0,nickname:void 0,normalizedSearchTerms:void 0,participantCapabilities:void 0,readActionTimestampMs:i.zero,readWatermarkTimestampMs:i.zero,subscribeSource:void 0,threadKey:f})})).then(function(){return f})})}g.call=a}),98);
__d("MWCMSubThreadChatTabWithSubthread.react",["BaseMultiStepContainer.react","CometPlaceholder.react","MWCMSubthreadChatTabContext.react","MWLSChatTabHeaderRoot.react","MWV2ChatTabLoadingWithGlimmers.react","MWV2TabContainer","deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay","useIsTabExpanded"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;var j=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MWCMSubthreadThreadViewChatTab.react").__setRef("MWCMSubThreadChatTabWithSubthread.react"));function k(a,b){var e=d("react-compiler-runtime").c(3),f;e[0]!==a||e[1]!==b?(f=function(d){a(function(a){var e=a.onReturn;return i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("MWV2ChatTabLoadingWithGlimmers.react"),{tab:b}),name:"MWCMSubThreadChatTabWithSubthread",children:i.jsx(j,{onReturn:function(){e()},tab:b,threadKey:d})})})},e[0]=a,e[1]=b,e[2]=f):f=e[2];return f}function l(a){var b=d("react-compiler-runtime").c(3),c=a.children,e=a.pushPage;a=a.tab;e=k(e,a);b[0]!==c||b[1]!==e?(a=i.jsx(d("MWCMSubthreadChatTabContext.react").MWCMSubthreadChatTabContextProvider,{pushSubthreadViewPage:e,children:c}),b[0]=c,b[1]=e,b[2]=a):a=b[2];return a}function a(a){var b=d("react-compiler-runtime").c(15),e=a.children,f=a.tab,g=a.thread,h=g.threadKey;a=c("useIsTabExpanded")(f);var j;b[0]!==a?(j={0:{className:"x5a5i1n x1obq294 x2c8kfy x1hm9lzh xhvchuf x1jx94hy x1rgmuzj xbbk1sx"},1:{className:"x5a5i1n x1obq294 x2c8kfy x1hm9lzh xhvchuf x1xa6b72 x85a59c xvue9z xqik5uc x1ubef0g"}}[!!a<<0],b[0]=a,b[1]=j):j=b[1];b[2]!==f?(a=i.jsx(c("MWV2ChatTabLoadingWithGlimmers.react"),{tab:f}),b[2]=f,b[3]=a):a=b[3];var k;b[4]!==e||b[5]!==f||b[6]!==g.threadKey||b[7]!==h?(k=function(a){return i.jsx(l,{pushPage:a,tab:f,children:i.jsxs(d("MWV2TabContainer").MWV2TabContainer,{style:{boxShadow:"none",margin:0},tab:f,threadKey:g.threadKey,children:[i.jsx(c("MWLSChatTabHeaderRoot.react"),{pushPage:a,tab:f,threadKey:h}),e]})})},b[4]=e,b[5]=f,b[6]=g.threadKey,b[7]=h,b[8]=k):k=b[8];var m;b[9]!==a||b[10]!==k?(m=i.jsx(c("BaseMultiStepContainer.react"),{disableFocusContainment:!1,disableInitialAutoFocus:!1,fallback:a,fitContentWidth:!0,children:k}),b[9]=a,b[10]=k,b[11]=m):m=b[11];b[12]!==j||b[13]!==m?(a=i.jsx("div",babelHelpers["extends"]({},j,{children:m})),b[12]=j,b[13]=m,b[14]=a):a=b[14];return a}g["default"]=a}),98);
__d("MWChatTabInThreadBannerInner_query.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatTabInThreadBannerInner_query",selections:[{args:null,kind:"FragmentSpread",name:"MAWChatTabInThreadBanner_query"},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"surface_nux_id",value:8888},{kind:"Literal",name:"trigger",value:"CHAT_TAB_OPEN"}],concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"12RdKQ"}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"MWChatTabInThreadBannerInner_query",fragmentName:"MWChatTabInThreadBannerMWXCardRendererStrategy_strategy",fragmentPropName:"strategy",kind:"ModuleImport"}],type:"CometQuickPromotionMWXCardRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:"12RdKQ")'}],storageKey:null}],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:8888,trigger:"CHAT_TAB_OPEN")'}],storageKey:null}],type:"Query",abstractKey:null};e.exports=a}),null);
__d("useIsDualThreadInThreadBannerNotDismissed",["I64","LSThreadBitOffset","MAWThreadCutover","MWEncryptedBackupsLocalStorageEntryEnum","getMWLocalStorageThreadsWithBannerDismissed","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=d("react-compiler-runtime").c(8),e=a.threadKey,f=d("MAWThreadCutover").useGetCutoverOpenThreadKey(e);f=d("MAWThreadCutover").useIsDualThreadCutoverOpenThread(f);if(b[0]!==f||b[1]!==e){var g=d("getMWLocalStorageThreadsWithBannerDismissed").parseLocalStorageThreadsWithBannerDismissed(c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_POSTCUTOVER_BANNER_ON_SECURE_THREAD_DISMISSED);g=f&&!Object.prototype.hasOwnProperty.call(g,(h||(h=d("I64"))).to_string(e));b[0]=f;b[1]=e;b[2]=g}else g=b[2];f=g;b[3]!==a?(g=d("LSThreadBitOffset").has(260,a),b[3]=a,b[4]=g):g=b[4];a=g;if(b[5]!==a||b[6]!==e){g=d("getMWLocalStorageThreadsWithBannerDismissed").parseLocalStorageThreadsWithBannerDismissed(c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_PRECUTOVER_BANNER_ON_OPEN_THREAD_DISMISSED);g=a&&!Object.prototype.hasOwnProperty.call(g,(h||(h=d("I64"))).to_string(e));b[5]=a;b[6]=e;b[7]=g}else g=b[7];a=g;return f||a}g["default"]=a}),98);
__d("MWChatTabInThreadBannerInner.react",["CometErrorBoundary.react","CometPlaceholder.react","CometQuickPromotionLoggerContext.react","CometRelay","LSMessagingThreadTypeUtil","MAWChatTabInThreadBanner.react","MWChatTabInThreadBannerInner_query.graphql","MWLSInThreadBannerComponent.react","cr:17333","cr:19806","react","react-compiler-runtime","useIsDualThreadInThreadBannerNotDismissed","useQuickPromotionFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){var e,f=d("react-compiler-runtime").c(17),g=a.query;a=a.thread;g=d("CometRelay").useFragment(h!==void 0?h:h=b("MWChatTabInThreadBannerInner_query.graphql"),g);var i=g==null||(e=g.viewer)==null||(e=e.eligible_promotions)==null||(e=e.nodes[0])==null||(e=e.comet_qp_sections)==null?void 0:e.renderer_strategy,l;f[0]===Symbol["for"]("react.memo_cache_sentinel")?(l={context_surface_id:8888,context_trigger:"chat_tab_open"},f[0]=l):l=f[0];l=c("useQuickPromotionFalcoEvent")(l);var m=c("useIsDualThreadInThreadBannerNotDismissed")(a);if(i!=null){var n;f[1]!==i?(n=j.jsx(d("CometRelay").MatchContainer,{match:i}),f[1]=i,f[2]=n):n=f[2];f[3]!==l||f[4]!==n?(i=j.jsx(c("CometQuickPromotionLoggerContext.react").Provider,{value:l,children:n}),f[3]=l,f[4]=n,f[5]=i):i=f[5];return i}else if(m){f[6]!==a?(l=b("cr:17333")&&j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(b("cr:17333"),{thread:a})}),f[6]=a,f[7]=l):l=f[7];f[8]!==a?(n=b("cr:19806")&&j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(b("cr:19806"),{thread:a})}),f[8]=a,f[9]=n):n=f[9];f[10]!==l||f[11]!==n?(i=j.jsxs(j.Fragment,{children:[l,n]}),f[10]=l,f[11]=n,f[12]=i):i=f[12];return i}else if(d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)){f[13]!==g?(m=j.jsx(c("MAWChatTabInThreadBanner.react"),{query:g}),f[13]=g,f[14]=m):m=f[14];return m}else if(d("LSMessagingThreadTypeUtil").isJoinedSocialChannel(a.threadType))return null;else{f[15]!==a.threadKey?(l=j.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWChatTabInThreadBanner",children:j.jsx(c("CometErrorBoundary.react"),{fallback:k,children:j.jsx(c("MWLSInThreadBannerComponent.react"),{threadKey:a.threadKey})})}),f[15]=a.threadKey,f[16]=l):l=f[16];return l}}function k(){return null}g["default"]=a}),98);
__d("MWChatTabInThreadBannerQuery.graphql",["MWChatTabInThreadBannerQuery_facebookRelayOperation","MWEBNewUserOnboardingShouldLoadUpsells.relayprovider","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatTabInThreadBannerQuery",selections:[{args:null,kind:"FragmentSpread",name:"MWChatTabInThreadBannerInner_query"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider"}],kind:"Operation",name:"MWChatTabInThreadBannerQuery",selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[a,c],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"backup_state",storageKey:null}]},{condition:"__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_new_user_onboarding_upsells",plural:!1,selections:[{args:null,documentName:"MWEBChatTabBannerNux_query",fragmentName:"MWEBNewUserOnboardingChatTabQP_viewer",fragmentPropName:"viewer",kind:"ModuleImport"}],storageKey:null}]},{alias:null,args:[{kind:"Literal",name:"surface_nux_id",value:8888},{kind:"Literal",name:"trigger",value:"CHAT_TAB_OPEN"}],concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"12RdKQ"}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[a,{kind:"InlineFragment",selections:[{args:null,documentName:"MWChatTabInThreadBannerInner_query",fragmentName:"MWChatTabInThreadBannerMWXCardRendererStrategy_strategy",fragmentPropName:"strategy",kind:"ModuleImport"}],type:"CometQuickPromotionMWXCardRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:"12RdKQ")'}],storageKey:null},c],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:8888,trigger:"CHAT_TAB_OPEN")'}],storageKey:null}]},params:{id:b("MWChatTabInThreadBannerQuery_facebookRelayOperation"),metadata:{},name:"MWChatTabInThreadBannerQuery",operationKind:"query",text:null,providedVariables:{__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider:b("MWEBNewUserOnboardingShouldLoadUpsells.relayprovider")}}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWChatTabInThreadBanner.react",["MWChatTabInThreadBannerInner.react","MWChatTabInThreadBannerQuery.graphql","RelayHooks","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){var e=d("react-compiler-runtime").c(3),f=a.mwChatTabInThreadBannerQueryRef;a=a.thread;f=d("RelayHooks").usePreloadedQuery(h!==void 0?h:h=b("MWChatTabInThreadBannerQuery.graphql"),f);var g;e[0]!==f||e[1]!==a?(g=j.jsx(c("MWChatTabInThreadBannerInner.react"),{query:f,thread:a}),e[0]=f,e[1]=a,e[2]=g):g=e[2];return g}g["default"]=a}),98);
__d("MWChatTabInThreadBannerLazyLoadedQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="29997971396516674"}),null);
__d("MWChatTabInThreadBannerLazyLoadedQuery.graphql",["MWChatTabInThreadBannerLazyLoadedQuery_facebookRelayOperation","MWEBNewUserOnboardingShouldLoadUpsells.relayprovider"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatTabInThreadBannerLazyLoadedQuery",selections:[{args:null,kind:"FragmentSpread",name:"MWChatTabInThreadBannerInner_query"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider"}],kind:"Operation",name:"MWChatTabInThreadBannerLazyLoadedQuery",selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[a,c],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"backup_state",storageKey:null}]},{condition:"__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_new_user_onboarding_upsells",plural:!1,selections:[{args:null,documentName:"MWEBChatTabBannerNux_query",fragmentName:"MWEBNewUserOnboardingChatTabQP_viewer",fragmentPropName:"viewer",kind:"ModuleImport"}],storageKey:null}]},{alias:null,args:[{kind:"Literal",name:"surface_nux_id",value:8888},{kind:"Literal",name:"trigger",value:"CHAT_TAB_OPEN"}],concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"12RdKQ"}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[a,{kind:"InlineFragment",selections:[{args:null,documentName:"MWChatTabInThreadBannerInner_query",fragmentName:"MWChatTabInThreadBannerMWXCardRendererStrategy_strategy",fragmentPropName:"strategy",kind:"ModuleImport"}],type:"CometQuickPromotionMWXCardRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:"12RdKQ")'}],storageKey:null},c],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:8888,trigger:"CHAT_TAB_OPEN")'}],storageKey:null}]},params:{id:b("MWChatTabInThreadBannerLazyLoadedQuery_facebookRelayOperation"),metadata:{},name:"MWChatTabInThreadBannerLazyLoadedQuery",operationKind:"query",text:null,providedVariables:{__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider:b("MWEBNewUserOnboardingShouldLoadUpsells.relayprovider")}}}}();e.exports=a}),null);
__d("MWChatTabInThreadBannerLazyLoaded.react",["CometRelay","MWChatTabInThreadBannerInner.react","MWChatTabInThreadBannerLazyLoadedQuery.graphql","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){var e=d("react-compiler-runtime").c(3);a=a.thread;var f=d("CometRelay").useLazyLoadQuery(h!==void 0?h:h=b("MWChatTabInThreadBannerLazyLoadedQuery.graphql"),{},{fetchPolicy:"store-or-network"}),g;e[0]!==f||e[1]!==a?(g=j.jsx(c("MWChatTabInThreadBannerInner.react"),{query:f,thread:a}),e[0]=f,e[1]=a,e[2]=g):g=e[2];return g}g["default"]=a}),98);
__d("MWChatTabLSDependencies",["LSCompleteThreadCutover","LSDynamicDependencies","LSMailboxTaskCompletionApiOnTaskCompletion","LSReceiveMarkThreadReadNative","LSSyncBumpThreadDataToClient","LSUpdateCommunityThreadStaleState","LSUpdateParentFolderReadWatermark","LSUpdateThreadNullState","LSVerifyE2EEMetadataThreadExistsV2","LSVerifyThreadRowExists","LSWriteCTAIdToThreadsTable"],(function(a,b,c,d,e,f,g){"use strict";function a(){d("LSDynamicDependencies").addToCachedModules({completeThreadCutover:c("LSCompleteThreadCutover"),mailboxTaskCompletionApiOnTaskCompletion:c("LSMailboxTaskCompletionApiOnTaskCompletion"),receiveMarkThreadReadNative:c("LSReceiveMarkThreadReadNative"),syncBumpThreadDataToClient:c("LSSyncBumpThreadDataToClient"),updateCommunityThreadStaleState:c("LSUpdateCommunityThreadStaleState"),updateParentFolderReadWatermark:c("LSUpdateParentFolderReadWatermark"),updateThreadNullState:c("LSUpdateThreadNullState"),verifyE2EEMetadataThreadExistsV2:c("LSVerifyE2EEMetadataThreadExistsV2"),verifyThreadRowExists:c("LSVerifyThreadRowExists"),writeCTAIdToThreadsTable:c("LSWriteCTAIdToThreadsTable")})}g.init=a}),98);
__d("MWPThreadPreview.react",["CometHeroInteractionWithDiv.react","I64","Int64Hooks","InteractionTracingMetrics","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSIntEnum","LSLocalCreateOptimisticGroupThreadStoredProcedure","LSMessagingThreadTypeUtil","LSVec","LSVerifyContactRowExistsStoredProcedure","LSVerifyThreadRowExistsStoredProcedure","MWChatInteraction","MWPActor.react","MWPThreadThemeProvider.react","MWThreadKey.react","MWXSpinner.react","Promise","ReQL","ReQLSuspense","cr:9777","gkx","promiseDone","react","react-compiler-runtime","recoverableViolation","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=l||(l=d("react"));e=l;var n=e.useEffect;e.useMemo;var o={preview:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",minHeight:"x2lwn1j",$$css:!0}};function p(a){var e=d("react-compiler-runtime").c(8),g=(k||(k=c("useReStore")))(),j;e[0]!==g||e[1]!==a?(j=function(){c("promiseDone")(g.runInTransaction(function(e){return(h||(h=b("Promise"))).all(a.map(function(a){return c("LSVerifyContactRowExistsStoredProcedure")(c("LSFactory")(e),{authorityLevel:(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL),blockedByViewerStatus:i.ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:i.ofNumber(c("LSContactIdType").FBID),contactType:i.ofNumber(c("LSContactType").USER),contactViewerRelationship:i.ofNumber(c("LSContactViewerRelationship").UNKNOWN),gender:i.ofNumber(c("LSContactGender").UNKNOWN),id:a.id,isBlocked:!1,isMemorialized:!1,isSelf:!1,workForeignEntityType:i.ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN)})}))},"readwrite",void 0,void 0,f.id+":90"))},e[0]=g,e[1]=a,e[2]=j):j=e[2];var l;e[3]!==a?(l=JSON.stringify(a.map(q)),e[3]=a,e[4]=l):l=e[4];var m;e[5]!==g||e[6]!==l?(m=[g,l],e[5]=g,e[6]=l,e[7]=m):m=e[7];n(j,m)}function q(a){return(j||(j=d("I64"))).to_string(a.id)}function r(a){var b=d("react-compiler-runtime").c(25),e=a.children,f=a.renderThreadPreview,g=a.renderThreadView,h=a.thread;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=d("MWChatInteraction").get("open_with_tokens"),b[0]=a):a=b[0];var i=a,k;b[1]!==h.threadKey||b[2]!==h.threadType?(a=function(){i!=null&&(c("InteractionTracingMetrics").addAnnotation(i,"thread_id",(j||(j=d("I64"))).to_string(h.threadKey)),c("InteractionTracingMetrics").addAnnotation(i,"thread_type",j.to_string(h.threadType)),c("InteractionTracingMetrics").addAnnotationBoolean(i,"is_secure",d("LSMessagingThreadTypeUtil").isArmadilloSecure(h.threadType)))},k=[i,h.threadKey,h.threadType],b[1]=h.threadKey,b[2]=h.threadType,b[3]=a,b[4]=k):(a=b[3],k=b[4]);n(a,k);if(f!=null){b[5]!==e||b[6]!==f||b[7]!==h?(a=f(h,e),b[5]=e,b[6]=f,b[7]=h,b[8]=a):a=b[8];return a}k=h.threadKey;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(f={className:"x78zum5 xdt5ytf x1iyjqo2 x6prxxf x2lwn1j"},b[9]=f):f=b[9];a=h.themeFbid;var l;b[10]!==g||b[11]!==h?(l=g(h),b[10]=g,b[11]=h,b[12]=l):l=b[12];b[13]!==l||b[14]!==h.themeFbid?(g=m.jsx(c("CometHeroInteractionWithDiv.react"),{interactionDesc:"MWV2_CHAT_TAB",interactionUUID:i,pageletName:"ChatTab",xstyle:o.preview,children:m.jsx(c("MWPThreadThemeProvider.react"),{themeFbid:a,children:l})}),b[13]=l,b[14]=h.themeFbid,b[15]=g):g=b[15];b[16]===Symbol["for"]("react.memo_cache_sentinel")?(a={className:"x2lah0s x879a55"},b[16]=a):a=b[16];b[17]!==e?(l=m.jsx("div",babelHelpers["extends"]({},a,{children:e})),b[17]=e,b[18]=l):l=b[18];b[19]!==l||b[20]!==g?(a=m.jsxs("div",babelHelpers["extends"]({},f,{children:[g,l]})),b[19]=l,b[20]=g,b[21]=a):a=b[21];b[22]!==a||b[23]!==h.threadKey?(e=m.jsx(d("MWThreadKey.react").MWThreadKeyProvider,{id:k,children:a}),b[22]=a,b[23]=h.threadKey,b[24]=e):e=b[24];return e}function s(a){var b=d("react-compiler-runtime").c(22),e=a.children,g=a.recipientToken,h=a.renderThreadPreview,j=a.renderThreadView,l=a.setPreviewThread,o=(k||(k=c("useReStore")))(),q=g.threadType,s=g.id;b[0]!==g?(a=[g],b[0]=g,b[1]=a):a=b[1];p(a);b[2]!==s||b[3]!==o||b[4]!==q?(g=function(){c("promiseDone")(o.runInTransaction(function(a){return c("LSVerifyThreadRowExistsStoredProcedure")(c("LSFactory")(a),{syncGroup:(i||(i=d("LSIntEnum"))).ofNumber(1),threadKey:s,threadType:q})},"readwrite",void 0,void 0,f.id+":187"))},a=[o,s,q],b[2]=s,b[3]=o,b[4]=q,b[5]=g,b[6]=a):(g=b[5],a=b[6]);d("Int64Hooks").useEffectInt64(g,a);b[7]!==s||b[8]!==o.tables.threads?(g=function(){return d("ReQL").fromTableAscending(o.tables.threads).getKeyRange(s)},b[7]=s,b[8]=o.tables.threads,b[9]=g):g=b[9];b[10]!==s||b[11]!==o?(a=[o,s],b[10]=s,b[11]=o,b[12]=a):a=b[12];var t=d("ReQLSuspense").useFirst(g,a,f.id+":198");b[13]!==l||b[14]!==t?(g=function(){l(t)},a=[l,t],b[13]=l,b[14]=t,b[15]=g,b[16]=a):(g=b[15],a=b[16]);n(g,a);if(t!=null){b[17]!==e||b[18]!==h||b[19]!==j||b[20]!==t?(g=m.jsx(r,{renderThreadPreview:h,renderThreadView:j,thread:t,children:e}),b[17]=e,b[18]=h,b[19]=j,b[20]=t,b[21]=g):g=b[21];return g}else return null}function t(a,b,e){var g=d("react-compiler-runtime").c(21),h=(k||(k=c("useReStore")))(),i=(j||(j=d("I64"))).to_string(d("MWPActor.react").useActor()),l;g[0]!==h.tables.participants||g[1]!==b?(l=function(){return d("ReQL").fromTableAscending(h.tables.participants).filter(function(a){return b.has((j||(j=d("I64"))).to_string(a.contactId))}).map(y)},g[0]=h.tables.participants,g[1]=b,g[2]=l):l=g[2];var m;g[3]!==h||g[4]!==b?(m=[h,b],g[3]=h,g[4]=b,g[5]=m):m=g[5];var n=d("ReQLSuspense").useArray(l,m,f.id+":234");g[6]!==i||g[7]!==h.tables.participants||g[8]!==h.tables.threads||g[9]!==e||g[10]!==n||g[11]!==b||g[12]!==a.length?(l=function(){var c=new Set(n);return d("ReQL").fromTableAscending(h.tables.threads).filter(function(a){return(j||(j=d("I64"))).equal(a.threadType,e)}).filter(x).filter(function(a){a=a.clientThreadKey;if(a!=null)return c.has((j||(j=d("I64"))).to_string(a));else return!1}).filter(w).map(function(a){var b=a.clientThreadKey;b=d("ReQLSuspense").toArray(d("ReQL").fromTableDescending(h.tables.participants.index("threadKeyReadWatermarkTimestampMs")).getKeyRange(b).map(v).filter(function(a){return a!==i}),f.id+":274");return{participantsWithoutActor:b,thread:a}}).filter(function(c){c=c.participantsWithoutActor;if(a.length===1&&c.length===0)return!0;else if(c.every(function(a){return b.has(a)}))return c.length===b.size;else return!1}).map(u)},g[6]=i,g[7]=h.tables.participants,g[8]=h.tables.threads,g[9]=e,g[10]=n,g[11]=b,g[12]=a.length,g[13]=l):l=g[13];g[14]!==i||g[15]!==h||g[16]!==e||g[17]!==n||g[18]!==b||g[19]!==a.length?(m=[n,h,e,a.length,i,b],g[14]=i,g[15]=h,g[16]=e,g[17]=n,g[18]=b,g[19]=a.length,g[20]=m):m=g[20];return d("ReQLSuspense").useFirst(l,m,f.id+":247")}function u(a){return a.thread}function v(a){return(j||(j=d("I64"))).to_string(a.contactId)}function w(a){a=a.clientThreadKey;return a==null?!1:!0}function x(a){return a.threadName==null}function y(a){return(j||(j=d("I64"))).to_string(a.threadKey)}function z(a,e,g,l,m,n){var o=d("react-compiler-runtime").c(9),p=m===void 0?null:m,q=n===void 0?null:n,r=(k||(k=c("useReStore")))(),s=a==null;o[0]!==l||o[1]!==r||o[2]!==s||o[3]!==p||o[4]!==q||o[5]!==e||o[6]!==g?(m=function(){s&&c("promiseDone")(r.runInTransaction(function(a){if((j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(2)))return c("LSLocalCreateOptimisticGroupThreadStoredProcedure")(c("LSFactory")(a),{checkExistingThreads:l,participants:c("LSVec").ofArray(g.map(B)),threadMetadata:p!=null?p:void 0,threadName:q!=null?q:void 0}).then(A);else if(d("LSMessagingThreadTypeUtil").isArmadilloSecure(e))return b("cr:9777")==null?(h||(h=b("Promise"))).resolve():b("cr:9777").call(a,g,e);c("recoverableViolation")("Don't know how to create optimistic thread for thread of thread type "+(e!=null?(j||(j=d("I64"))).to_string(e):""),"messenger_web_creation");return(h||(h=b("Promise"))).resolve()},"readwrite",void 0,void 0,f.id+":330"))},n=[l,r,s,g,p,e,q],o[0]=l,o[1]=r,o[2]=s,o[3]=p,o[4]=q,o[5]=e,o[6]=g,o[7]=m,o[8]=n):(m=o[7],n=o[8]);d("Int64Hooks").useEffectInt64(m,n)}function A(){}function B(a){return a.id}function C(a){var b=d("react-compiler-runtime").c(8),c=a.checkExistingThreads,e=a.children,f=a.renderThreadPreview,g=a.renderThreadView,h=a.setPreviewThread,i=a.threadMetadata,j=a.threadName,k=a.threadType,l=a.tokenContactIdsMaybeExcludingActor,o=a.tokens;a=a.tokensMaybeExcludingActor;i=i===void 0?null:i;j=j===void 0?null:j;var q=t(a,l,k);p(a);z(q,k,o,c,i,j);b[0]!==h||b[1]!==q?(l=function(){h(q)},b[0]=h,b[1]=q,b[2]=l):l=b[2];n(l,void 0);if(q!=null){b[3]!==e||b[4]!==f||b[5]!==g||b[6]!==q?(a=m.jsx(r,{renderThreadPreview:f,renderThreadView:g,thread:q,children:e}),b[3]=e,b[4]=f,b[5]=g,b[6]=q,b[7]=a):a=b[7];return a}else return null}function D(a,b,e,g,h,l){var m=d("react-compiler-runtime").c(28),n=(k||(k=c("useReStore")))(),o=(j||(j=d("I64"))).to_string(d("MWPActor.react").useActor()),p;m[0]!==n.tables.participants||m[1]!==b?(p=function(){return d("ReQL").fromTableAscending(n.tables.participants).filter(function(a){return b.has((j||(j=d("I64"))).to_string(a.contactId))}).map(H)},m[0]=n.tables.participants,m[1]=b,m[2]=p):p=m[2];var q;m[3]!==n||m[4]!==b?(q=[n,b],m[3]=n,m[4]=b,m[5]=q):q=m[5];var r=d("ReQLSuspense").useArray(p,q,f.id+":437"),s=c("gkx")("24167")||c("gkx")("33038");m[6]!==o||m[7]!==g||m[8]!==n.tables.participants||m[9]!==n.tables.threads||m[10]!==l||m[11]!==h||m[12]!==e||m[13]!==r||m[14]!==b||m[15]!==a.length?(p=function(){var k=new Set(r),m=function(){var b=a.length>1;if(b)if(l)return d("ReQL").fromTableAscending(n.tables.threads).filter(G);else if(c("gkx")("5703"))return d("ReQL").fromTableDescending(n.tables.threads.index("lastActivityTimestampMs"));return d("ReQL").fromTableAscending(n.tables.threads).filter(function(a){return(j||(j=d("I64"))).equal(a.threadType,e)})};m=m();return m.filter(function(a){return s&&h!=null?a.threadName===h:a.threadName==null}).filter(function(a){if(g)return!0;else return(j||(j=d("I64"))).equal(a.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC))}).filter(function(a){return k.has((j||(j=d("I64"))).to_string(a.threadKey))}).map(function(a){var b=d("ReQLSuspense").toArray(d("ReQL").fromTableDescending(n.tables.participants.index("threadKeyReadWatermarkTimestampMs")).getKeyRange(a.threadKey).map(F),f.id+":509");return{participantsWithActor:b,thread:a}}).filter(function(a){a=a.participantsWithActor;var c=a.filter(function(a){return a!==o});if(c.length===0&&a.length===1)return!0;else if(a.length===c.length||c.length!==b.size)return!1;else return c.every(function(a){return b.has(a)})}).map(E)},m[6]=o,m[7]=g,m[8]=n.tables.participants,m[9]=n.tables.threads,m[10]=l,m[11]=h,m[12]=e,m[13]=r,m[14]=b,m[15]=a.length,m[16]=p):p=m[16];m[17]!==e?(q=JSON.stringify(e),m[17]=e,m[18]=q):q=m[18];var t;m[19]!==o||m[20]!==g||m[21]!==n||m[22]!==q||m[23]!==h||m[24]!==r||m[25]!==b||m[26]!==a?(t=[r,n,q,g,a,b,o,h,s],m[19]=o,m[20]=g,m[21]=n,m[22]=q,m[23]=h,m[24]=r,m[25]=b,m[26]=a,m[27]=t):t=m[27];return d("ReQLSuspense").useFirst(p,t,f.id+":453")}function E(a){return a.thread}function F(a){return(j||(j=d("I64"))).to_string(a.contactId)}function G(a){return(j||(j=d("I64"))).equal(a.threadType,(i||(i=d("LSIntEnum"))).ofNumber(16))}function H(a){return(j||(j=d("I64"))).to_string(a.threadKey)}function I(a){var b=d("react-compiler-runtime").c(23),c=a.checkExistingThreads,e=a.children,f=a.renderThreadPreview,g=a.renderThreadView,h=a.secureThreadToggleEnabled,i=a.setPreviewThread,j=a.threadMetadata,k=a.threadName,l=a.threadType,o=a.tokens;a=a.tokensMaybeExcludingActor;j=j===void 0?null:j;k=k===void 0?null:k;var p;b[0]!==a?(p=new Set(a.map(J)),b[0]=a,b[1]=p):p=b[1];p=p;p=p;var q=D(a,p,l,c,k,h),s;b[2]!==i||b[3]!==q?(h=function(){q!=null&&i(q)},s=[i,q],b[2]=i,b[3]=q,b[4]=h,b[5]=s):(h=b[4],s=b[5]);n(h,s);if(q!=null){b[6]!==e||b[7]!==f||b[8]!==g||b[9]!==q?(h=m.jsx(r,{renderThreadPreview:f,renderThreadView:g,thread:q,children:e}),b[6]=e,b[7]=f,b[8]=g,b[9]=q,b[10]=h):h=b[10];return h}else{b[11]!==c||b[12]!==e||b[13]!==f||b[14]!==g||b[15]!==i||b[16]!==j||b[17]!==k||b[18]!==l||b[19]!==p||b[20]!==o||b[21]!==a?(s=m.jsx(C,{checkExistingThreads:c,renderThreadPreview:f,renderThreadView:g,setPreviewThread:i,threadMetadata:j,threadName:k,threadType:l,tokenContactIdsMaybeExcludingActor:p,tokens:o,tokensMaybeExcludingActor:a,children:e}),b[11]=c,b[12]=e,b[13]=f,b[14]=g,b[15]=i,b[16]=j,b[17]=k,b[18]=l,b[19]=p,b[20]=o,b[21]=a,b[22]=s):s=b[22];return s}}function J(a){return(j||(j=d("I64"))).to_string(a.id)}function a(a){var b=d("react-compiler-runtime").c(59),e=a.areWeCreatingASecureThread,f=a.checkExistingThreads,g=a.children,h=a.isCutoverInProgress,k=a.nullstate,l=a.renderThreadPreview,o=a.renderThreadView,p=a.secureThreadToggleEnabled,q=a.setPreviewThread,r=a.threadMetadata,t=a.threadName,u=a.tokens;a=f===void 0?!0:f;f=h===void 0?!1:h;h=k===void 0?null:k;k=p===void 0?!1:p;p=r===void 0?null:r;r=t===void 0?null:t;var v=d("MWPActor.react").useActor();if(b[0]!==v||b[1]!==u){b[3]!==v?(t=function(a){return!(j||(j=d("I64"))).equal(a.id,v)},b[3]=v,b[4]=t):t=b[4];t=u.filter(t);b[0]=v;b[1]=u;b[2]=t}else t=b[2];t=t;t=t;var w;b[5]!==q||b[6]!==u.length?(w=function(){u.length===0&&q()},b[5]=q,b[6]=u.length,b[7]=w):w=b[7];var x;b[8]!==q||b[9]!==u?(x=[q,u],b[8]=q,b[9]=u,b[10]=x):x=b[10];n(w,x);if(f){b[11]===Symbol["for"]("react.memo_cache_sentinel")?(w=m.jsx("div",babelHelpers["extends"]({className:"x6s0dn4 x78zum5 x1iyjqo2 xl56j7k"},{children:m.jsx(c("MWXSpinner.react"),{color:"disabled_DEPRECATED",size:24})})),b[11]=w):w=b[11];return w}if(u.length===0)return h;x=t.length;if(x!==1){if(x===0){if(e){b[12]===Symbol["for"]("react.memo_cache_sentinel")?(f=(i||(i=d("LSIntEnum"))).ofNumber(15),b[12]=f):f=b[12];b[13]!==a||b[14]!==g||b[15]!==l||b[16]!==o||b[17]!==k||b[18]!==q||b[19]!==p||b[20]!==u?(w=m.jsx(I,{checkExistingThreads:a,renderThreadPreview:l,renderThreadView:o,secureThreadToggleEnabled:k,setPreviewThread:q,threadMetadata:p,threadType:f,tokens:u,tokensMaybeExcludingActor:u,children:g}),b[13]=a,b[14]=g,b[15]=l,b[16]=o,b[17]=k,b[18]=q,b[19]=p,b[20]=u,b[21]=w):w=b[21];return w}b[22]!==g||b[23]!==l||b[24]!==o||b[25]!==q||b[26]!==u[0]?(h=m.jsx(s,{recipientToken:u[0],renderThreadPreview:l,renderThreadView:o,setPreviewThread:q,children:g}),b[22]=g,b[23]=l,b[24]=o,b[25]=q,b[26]=u[0],b[27]=h):h=b[27];return h}}else{x=t[0];if(a)if(e){b[28]===Symbol["for"]("react.memo_cache_sentinel")?(f=(i||(i=d("LSIntEnum"))).ofNumber(15),b[28]=f):f=b[28];b[29]!==a||b[30]!==g||b[31]!==l||b[32]!==o||b[33]!==k||b[34]!==q||b[35]!==p||b[36]!==u||b[37]!==t?(w=m.jsx(I,{checkExistingThreads:a,renderThreadPreview:l,renderThreadView:o,secureThreadToggleEnabled:k,setPreviewThread:q,threadMetadata:p,threadType:f,tokens:u,tokensMaybeExcludingActor:t,children:g}),b[29]=a,b[30]=g,b[31]=l,b[32]=o,b[33]=k,b[34]=q,b[35]=p,b[36]=u,b[37]=t,b[38]=w):w=b[38];return w}else{b[39]!==g||b[40]!==x||b[41]!==l||b[42]!==o||b[43]!==q?(h=m.jsx(s,{recipientToken:x,renderThreadPreview:l,renderThreadView:o,setPreviewThread:q,children:g}),b[39]=g,b[40]=x,b[41]=l,b[42]=o,b[43]=q,b[44]=h):h=b[44];return h}}b[45]!==e?(f=e?(i||(i=d("LSIntEnum"))).ofNumber(16):(i||(i=d("LSIntEnum"))).ofNumber(2),b[45]=e,b[46]=f):f=b[46];b[47]!==a||b[48]!==g||b[49]!==l||b[50]!==o||b[51]!==k||b[52]!==q||b[53]!==f||b[54]!==p||b[55]!==r||b[56]!==u||b[57]!==t?(w=m.jsx(I,{checkExistingThreads:a,renderThreadPreview:l,renderThreadView:o,secureThreadToggleEnabled:k,setPreviewThread:q,threadMetadata:p,threadName:r,threadType:f,tokens:u,tokensMaybeExcludingActor:t,children:g}),b[47]=a,b[48]=g,b[49]=l,b[50]=o,b[51]=k,b[52]=q,b[53]=f,b[54]=p,b[55]=r,b[56]=u,b[57]=t,b[58]=w):w=b[58];return w}g["default"]=a}),98);
__d("useMWChatStateUpdateThreadKeyDescriptorIfAuthoritative",["Int64Hooks","LSAuthorityLevel","LSIntEnum","MWChatStateActions","MWChatStateV2.react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e){var f=d("react-compiler-runtime").c(12),g;f[0]!==e?(g=e===void 0?{shouldClearOldHiddenTab:!1,shouldUpdateThreadType:!1}:e,f[0]=e,f[1]=g):g=f[1];var i=g,j=d("MWChatStateV2.react").useDispatch(),k=a==null?void 0:a.threadKey,l=a==null?void 0:a.clientThreadKey,m=a==null?void 0:a.threadType,n=a==null?void 0:a.authorityLevel;f[2]!==n||f[3]!==j||f[4]!==l||f[5]!==k||f[6]!==m||f[7]!==i.shouldClearOldHiddenTab||f[8]!==i.shouldUpdateThreadType||f[9]!==b.tabId?(e=function(){k!=null&&n!=null&&(h||(h=d("LSIntEnum"))).toNumber(n)>=c("LSAuthorityLevel").AUTHORITATIVE&&j(d("MWChatStateActions").updateThreadKeyDescriptor(b.tabId,k,l,i.shouldUpdateThreadType?m:void 0,{shouldClearOldHiddenTab:i.shouldClearOldHiddenTab}))},g=[b.tabId,k,l,j,n,m,i.shouldUpdateThreadType,i.shouldClearOldHiddenTab],f[2]=n,f[3]=j,f[4]=l,f[5]=k,f[6]=m,f[7]=i.shouldClearOldHiddenTab,f[8]=i.shouldUpdateThreadType,f[9]=b.tabId,f[10]=e,f[11]=g):(e=f[10],g=f[11]);d("Int64Hooks").useEffectInt64(e,g)}g["default"]=a}),98);
__d("MWOptimisticSecureThreadPreview.react",["CometPlaceholder.react","FDSProgressRingIndeterminate.react","I64","LSIntEnum","LSThreadAttributionStore","MWComposerGating.react","MWLSChatTabHeaderRoot.react","MWOpenAndSecureThreadView.react","MWPThreadPreview.react","MWPThreadThemeProvider.react","MWV2TabContainer","ReQL","ReQLSuspense","cr:9410","react","react-compiler-runtime","useMWChatStateUpdateThreadKeyDescriptorIfAuthoritative","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||(k=d("react"));e=k;var m=e.useEffect;e.useMemo;var n=e.useState;function a(a){var e=d("react-compiler-runtime").c(25),g=a.otherContactIdForOptimisticSecureThread,k=a.tab,p=(h||(h=c("useReStore")))(),q;e[0]!==p||e[1]!==g?(a=function(){return g==null?d("ReQL").empty():d("ReQL").fromTableAscending(p.tables.contacts,["blockedByViewerStatus","name","profilePictureUrl","id"]).getKeyRange(g)},q=[p,g],e[0]=p,e[1]=g,e[2]=a,e[3]=q):(a=e[2],q=e[3]);a=d("ReQLSuspense").useFirst(a,q,f.id+":58");q=n();var r=q[0];q=q[1];var s;e[4]===Symbol["for"]("react.memo_cache_sentinel")?(s={shouldClearOldHiddenTab:!1,shouldUpdateThreadType:!1},e[4]=s):s=e[4];c("useMWChatStateUpdateThreadKeyDescriptorIfAuthoritative")(r,k,s);var t=r==null?void 0:r.threadKey,u;e[5]!==g||e[6]!==t?(s=function(){if(t==null||g==null)return;var a=d("LSThreadAttributionStore").getSourceWithoutReset(void 0,(i||(i=d("I64"))).to_string(g));a.value!=="unknown"&&(a.type==="LSThreadAttribution"?d("LSThreadAttributionStore").setLSMessagingThreadAttribution((i||(i=d("I64"))).to_string(t),i.to_string(a.value)):d("LSThreadAttributionStore").setSource((i||(i=d("I64"))).to_string(t),a.value))},u=[t,g],e[5]=g,e[6]=t,e[7]=s,e[8]=u):(s=e[7],u=e[8]);m(s,u);e[9]===Symbol["for"]("react.memo_cache_sentinel")?(s=l.jsx("div",babelHelpers["extends"]({className:"x6s0dn4 x78zum5 x1iyjqo2 xl56j7k"},{children:l.jsx(c("FDSProgressRingIndeterminate.react"),{color:"disabled_DEPRECATED",size:24})})),e[9]=s):s=e[9];u=s;if(e[10]!==r){s=r!=null&&l.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWDefaultE2eeThreadPreview.Composer",children:l.jsx(c("MWPThreadThemeProvider.react"),{themeFbid:r.themeFbid,children:l.jsx(d("MWComposerGating.react").MWChatComposerGating,{isPreviewThread:!0,thread:r},(i||(i=d("I64"))).to_string((s=r.clientThreadKey)!=null?s:r.threadKey))})});e[10]=r;e[11]=s}else s=e[11];s=s;var v;e[12]!==a?(v=a!=null?[{blockedByViewerStatus:a.blockedByViewerStatus,contextLine:"",displayName:a.name,id:a.id,profilePicUrl:a.profilePictureUrl,threadType:(j||(j=d("LSIntEnum"))).ofNumber(15),type_:(j||(j=d("LSIntEnum"))).ofNumber(1)}]:[],e[12]=a,e[13]=v):v=e[13];a=v;v=a;e[14]!==v||e[15]!==s?(a=l.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWDefaultE2eeThreadPreview.ThreadPreview",children:l.jsx(c("MWPThreadPreview.react"),{areWeCreatingASecureThread:!0,nullstate:u,renderThreadView:o,setPreviewThread:q,tokens:v,children:s})}),e[14]=v,e[15]=s,e[16]=a):a=e[16];var w=a;q=(u=r==null?void 0:r.threadKey)!=null?u:void 0;e[17]!==w||e[18]!==r||e[19]!==k?(v=b("cr:9410")!=null?l.jsx(b("cr:9410"),{children:function(a){return l.jsxs(l.Fragment,{children:[r&&l.jsx(c("MWLSChatTabHeaderRoot.react"),{pushPage:a,tab:k,threadKey:r.threadKey}),w]})}}):l.jsxs(l.Fragment,{children:[r&&l.jsx(c("MWLSChatTabHeaderRoot.react"),{tab:k,threadKey:r.threadKey}),w]}),e[17]=w,e[18]=r,e[19]=k,e[20]=v):v=e[20];e[21]!==q||e[22]!==v||e[23]!==k?(s=l.jsx(d("MWV2TabContainer").MWV2TabContainer,{tab:k,threadKey:q,children:v}),e[21]=q,e[22]=v,e[23]=k,e[24]=s):s=e[24];return s}function o(a){return l.jsx(c("MWOpenAndSecureThreadView.react"),{thread:a})}o.displayName=o.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWOnDemandCutoverThreadPreview.react",["Int64Hooks","MAWOnDemandCutoverTrigger","MWOptimisticSecureThreadPreview.react","promiseDone","react","react-compiler-runtime","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(7),e=a.otherContactIdForOnDemandCutoverThread;a=a.tab;var f=c("useAsyncReStore")(),g,h;b[0]!==f||b[1]!==e?(g=function(){if(e==null)return;c("promiseDone")(f,function(a){d("MAWOnDemandCutoverTrigger").triggerOnDemandCutoverAndCreateSecureThread(a,e,"chatTab")})},h=[f,e],b[0]=f,b[1]=e,b[2]=g,b[3]=h):(g=b[2],h=b[3]);d("Int64Hooks").useEffectInt64(g,h);b[4]!==e||b[5]!==a?(g=i.jsx(c("MWOptimisticSecureThreadPreview.react"),{otherContactIdForOptimisticSecureThread:e,tab:a}),b[4]=e,b[5]=a,b[6]=g):g=b[6];return g}g["default"]=a}),98);
__d("MWV2ChatTabThreadLinkHashContext.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext,k=e(null);function a(a){var b=d("react-compiler-runtime").c(3),c=a.children;a=a.threadLinkHash;a=a!=null?a:null;var e;b[0]!==c||b[1]!==a?(e=i.jsx(k.Provider,{value:a,children:c}),b[0]=c,b[1]=a,b[2]=e):e=b[2];return e}function b(){return j(k)}g.MWV2ChatTabThreadLinkHashContextProvider=a;g.useGetChatTabThreadLinkHash=b}),98);
__d("useCometSubscribeMessengerIsOnDemandCutoverEligible",["LSContactBitOffset","LSMessagingThreadTypeUtil","MAWThreadCutover","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=d("react-compiler-runtime").c(12),g=(h||(h=c("useReStore")))(),i,j;e[0]!==g||e[1]!==a||e[2]!==b?(i=function(){return a!=null&&b!=null&&d("LSMessagingThreadTypeUtil").isOpenOneToOne(b)?d("ReQL").fromTableAscending(g.tables.contacts,[].concat(d("LSContactBitOffset").contactCapabilityFields,["id"])).getKeyRange(a):d("ReQL").empty()},j=[g,a,b],e[0]=g,e[1]=a,e[2]=b,e[3]=i,e[4]=j):(i=e[3],j=e[4]);i=d("ReQLSuspense").useFirst(i,j,f.id+":34");j=d("MAWThreadCutover").useIsCutoverOpenThread(a);if(b==null||!d("LSMessagingThreadTypeUtil").isOpenOneToOne(b)||j){e[5]===Symbol["for"]("react.memo_cache_sentinel")?(j=[!1,!0,null],e[5]=j):j=e[5];return j}if(i==null){e[6]===Symbol["for"]("react.memo_cache_sentinel")?(j=[!1,!1,null],e[6]=j):j=e[6];return j}e[7]!==i?(j=i!=null&&d("LSContactBitOffset").has(76,i),e[7]=i,e[8]=j):j=e[8];j=j;var k;e[9]!==j||e[10]!==i.id?(k=[j,!0,i.id],e[9]=j,e[10]=i.id,e[11]=k):k=e[11];return k}g["default"]=a}),98);
__d("useMWCloseDuplicateChatTabs",["I64","MWChatStateActions","MWChatStateContext","MWChatStateV2.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useEffect;function a(a){var b=d("react-compiler-runtime").c(9),c=d("MWChatStateContext").useChatState(k),e=d("MWChatStateV2.react").useDispatch(),f;b[0]!==e||b[1]!==a.tabId||b[2]!==a.tabType.threadKeyDescriptor||b[3]!==c?(f=function(){var b;if(((b=a.tabType.threadKeyDescriptor)==null?void 0:b.threadKey)==null)return;b=Array.from(c.values()).filter(function(b){var c,e=b.tabId;b=b.tabType;return((c=b.threadKeyDescriptor)==null?void 0:c.threadKey)==null||((c=a.tabType.threadKeyDescriptor)==null?void 0:c.threadKey)==null?!1:a.tabId>e&&(i||(i=d("I64"))).equal(b.threadKeyDescriptor.threadKey,a.tabType.threadKeyDescriptor.threadKey)});b.forEach(function(a){var b=a.closeWatermark,c=a.openWatermark;a=a.tabId;c>b&&e(d("MWChatStateActions").closeTab(Date.now(),a))})},b[0]=e,b[1]=a.tabId,b[2]=a.tabType.threadKeyDescriptor,b[3]=c,b[4]=f):f=b[4];var g;b[5]!==e||b[6]!==a||b[7]!==c?(g=[e,a,c],b[5]=e,b[6]=a,b[7]=c,b[8]=g):g=b[8];j(f,g)}function k(a){return a.tabs}g["default"]=a}),98);
__d("MWV2ChatTab.react",["BaseHeadingContextWrapper.react","CometErrorBoundary.react","CometMessagingChatTabErrorState.react","CometPageletWithDiv.react","CometPlaceholder.react","CometTransientDialogProvider.react","I64","Int64Hooks","InteractionTracingMetrics","LSFactory","LSMessagingThreadTypeUtil","LSPlatformWaitForTaskCompletion","LSThreadAttributionStore","LSThreadBitOffset","LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure","LegacyHidden","MAWThreadCutover","MAWUnrecoverableErrorBoundary.react","MWCMSubThreadChatTabWithSubthread.react","MWChatConnectionStatusCard.react","MWChatInteraction","MWChatStateContext","MWChatTabInThreadBanner.react","MWChatTabInThreadBannerLazyLoaded.react","MWChatTabLSDependencies","MWComposerGating.react","MWCreatorMessagingUtils","MWFullThreadProvider.react","MWInChatTabContextProvider.react","MWInboxPinnedMessagesBanner.react","MWLSChatTabHeaderRoot.react","MWOnDemandCutoverThreadPreview.react","MWOpenAndSecureThreadView.react","MWOptimisticSecureThreadPreview.react","MWPNewMessageAnnouncementForScreenReaders.react","MWPThemeCSSProvider.react","MWPThreadIsPage.react","MWPThreadThemeProvider.react","MWPVisibleMessageContext.react","MWThreadKey.react","MWV2ChatTabHeaderLoadingWithGlimmers.react","MWV2ChatTabThreadLinkHashContext.react","MWV2ComposerActionsContext.react","MWV2ComposerHasContentContext.react","MWV2EnsureThatChatTabExists","MWV2ErrorComposer.react","MWV2FileDropzone.react","MWV2TabContainer","MetaConfig","QPLUserFlow","ReQL","ReQLSuspense","XPlatWebAudioPlaybackContextProvider.react","cr:10518","cr:1113","cr:21386","cr:9410","emptyFunction","promiseDone","qpl","react","react-compiler-runtime","useC4gEngagementImpressionLogging","useCometSubscribeMessengerHasDefaultThreadOneToOneCapability","useCometSubscribeMessengerIsOnDemandCutoverEligible","useEmptyFunction","useMWChatStateUpdateThreadKeyDescriptorIfAuthoritative","useMWCloseDuplicateChatTabs","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react"));e=i;var l=e.memo;e.useCallback;var m=e.useLayoutEffect,n=e.useRef;d("MWChatTabLSDependencies").init();var o=(e=b("cr:1113"))!=null?e:c("useEmptyFunction"),p=(e=b("cr:10518"))!=null?e:c("useEmptyFunction");function q(a){var b=a.children;a=a.themeFbid;return d("MWPThemeCSSProvider.react").useIsThemeV2()?k.jsx(c("CometTransientDialogProvider.react"),{children:k.jsx(c("MWPThreadThemeProvider.react"),{themeFbid:a,children:b})}):k.jsx(c("MWPThreadThemeProvider.react"),{themeFbid:a,children:k.jsx(c("CometTransientDialogProvider.react"),{children:b})})}function r(a){var e=d("react-compiler-runtime").c(85),f=a.isMinimized,g=a.mawSecureThreadQPContainerQueryRef,h=a.mwChatTabInThreadBannerQueryRef,i=a.otherContactIdForDefaultE2eeThread,l=a.otherContactIdForOnDemandCutover,r=a.shouldUseDefaultE2eeOneToOne,w=a.shouldUseOnDemandCutover,x=a.tab,y=a.thread;a=a.threadLinkHash;var z=y.themeFbid,A=y.threadKey,B=y.threadType,C;e[0]!==y?(C={thread:y},e[0]=y,e[1]=C):C=e[1];o(C);e[2]!==A||e[3]!==B?(C={threadKey:A,threadType:B},e[2]=A,e[3]=B,e[4]=C):C=e[4];c("useC4gEngagementImpressionLogging")(C);p(y);e[5]!==B?(C=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(B),e[5]=B,e[6]=C):C=e[6];B=C;e[7]!==y?(C=d("LSThreadBitOffset").has(167,y),e[7]=y,e[8]=C):C=e[8];C=C;var D=!d("LSThreadBitOffset").has(56,y),E;e[9]===Symbol["for"]("react.memo_cache_sentinel")?(E={getScrollAreaElement:c("emptyFunction"),jumpToMostRecentMessage:c("emptyFunction"),restoreScrollPosition:c("emptyFunction")},e[9]=E):E=e[9];var F=n(E),G=d("MWChatStateContext").useChatState(v);c("useMWCloseDuplicateChatTabs")(x);var H;e[10]!==G||e[11]!==x.tabId?(E=function(){if(G!==x.tabId){var a;(a=F.current)==null||a.restoreScrollPosition()}},H=[G,x.tabId],e[10]=G,e[11]=x.tabId,e[12]=E,e[13]=H):(E=e[12],H=e[13]);m(E,H);e[14]!==B||e[15]!==y?(E=d("LSThreadBitOffset").has(106,y)&&B&&c("MetaConfig")._("105"),e[14]=B,e[15]=y,e[16]=E):E=e[16];H=E;e[17]===Symbol["for"]("react.memo_cache_sentinel")?(B=function(){var a;(a=F.current)==null||a.jumpToMostRecentMessage()},e[17]=B):B=e[17];E=B;e[18]!==y?(B=function(){d("MWCreatorMessagingUtils").isAPPlusMessageRequest(y)&&c("QPLUserFlow").endSuccess(c("qpl")._(421070823,"2981"),{annotations:{string:{action:"accept"}},instanceKey:(j||(j=d("I64"))).to_int32(y.threadKey)})},e[18]=y,e[19]=B):B=e[19];var I=B;e[20]!==G||e[21]!==x.tabId||e[22]!==y?(B=x.tabId!==G?null:k.jsx(c("MWPNewMessageAnnouncementForScreenReaders.react"),{thread:y}),e[20]=G,e[21]=x.tabId,e[22]=y,e[23]=B):B=e[23];var J;e[24]===Symbol["for"]("react.memo_cache_sentinel")?(J=k.jsx(c("MWChatConnectionStatusCard.react"),{}),e[24]=J):J=e[24];var K;e[25]!==h||e[26]!==y?(K=k.jsx(c("CometErrorBoundary.react"),{fallback:u,children:k.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWChatTabInThreadBanner.Root",children:h!=null?k.jsx(c("MWChatTabInThreadBanner.react"),{mwChatTabInThreadBannerQueryRef:h,thread:y}):k.jsx(c("MWChatTabInThreadBannerLazyLoaded.react"),{thread:y})})}),e[25]=h,e[26]=y,e[27]=K):K=e[27];e[28]!==H||e[29]!==y?(h=H&&k.jsx(c("MWInboxPinnedMessagesBanner.react"),{thread:y}),e[28]=H,e[29]=y,e[30]=h):h=e[30];e[31]!==f||e[32]!==g||e[33]!==y?(H=k.jsx(c("MWOpenAndSecureThreadView.react"),{entryPoint:"popup_chat_box",isMinimizedChatTab:f,mawSecureThreadQPContainerQueryRef:g,messageListRef:F,thread:y}),e[31]=f,e[32]=g,e[33]=y,e[34]=H):H=e[34];e[35]!==I?(f=function(a){return k.jsx(d("MWComposerGating.react").MWChatComposerGating,{afterSendMessage:I,isMessengerInbox:!1,isPreviewThread:!1,thread:a})},e[35]=I,e[36]=f):f=e[36];e[37]!==f||e[38]!==A?(g=k.jsx(d("MWV2ComposerActionsContext.react").MWV2ComposerActionsListener,{onMessageSendAttempt:E,children:k.jsx(d("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWComposer",children:k.jsx(c("MWFullThreadProvider.react"),{threadKey:A,children:f})})}),e[37]=f,e[38]=A,e[39]=g):g=e[39];e[40]!==g||e[41]!==a?(E=k.jsx(c("MAWUnrecoverableErrorBoundary.react"),{fallback:t,children:k.jsx(c("CometErrorBoundary.react"),{fallback:s,children:k.jsx(d("MWV2ChatTabThreadLinkHashContext.react").MWV2ChatTabThreadLinkHashContextProvider,{threadLinkHash:a,children:g})})}),e[40]=g,e[41]=a,e[42]=E):E=e[42];e[43]!==D||e[44]!==H||e[45]!==E||e[46]!==y?(f=k.jsxs(d("MWV2FileDropzone.react").MWV2FileDropzone,{isMediaOnly:D,thread:y,children:[H,E]}),e[43]=D,e[44]=H,e[45]=E,e[46]=y,e[47]=f):f=e[47];e[48]!==B||e[49]!==K||e[50]!==h||e[51]!==f?(g=k.jsxs(k.Fragment,{children:[B,J,K,h,f]}),e[48]=B,e[49]=K,e[50]=h,e[51]=f,e[52]=g):g=e[52];var L=g;e[53]!==L||e[54]!==C||e[55]!==x||e[56]!==y?(a=C?b("cr:21386")!=null?k.jsx(b("cr:21386").MWPConversationSearchContext,{children:k.jsx(c("MWCMSubThreadChatTabWithSubthread.react"),{tab:x,thread:y,children:L})}):k.jsx(c("MWCMSubThreadChatTabWithSubthread.react"),{tab:x,thread:y,children:L}):null,e[53]=L,e[54]=C,e[55]=x,e[56]=y,e[57]=a):a=e[57];D=a;e[58]!==r||e[59]!==w||e[60]!==A?(H=function(a){return r||w?k.jsx(k.Fragment,{children:a}):k.jsx(d("MWThreadKey.react").MWThreadKeyProvider,{id:A,children:a})},e[58]=r,e[59]=w,e[60]=A,e[61]=H):H=e[61];E=H;e[62]!==L||e[63]!==x||e[64]!==A?(J=b("cr:9410")!=null?k.jsx(d("MWV2TabContainer").MWV2TabContainer,{tab:x,threadKey:A,children:k.jsx(b("cr:9410"),{children:function(a){return k.jsxs(k.Fragment,{children:[k.jsx(d("CometPageletWithDiv.react").Placeholder,{fallback:k.jsx(c("MWV2ChatTabHeaderLoadingWithGlimmers.react"),{tab:x}),name:"MWChatTabHeader",children:k.jsx(c("MWLSChatTabHeaderRoot.react"),{pushPage:a,tab:x,threadKey:A})}),L]})}})}):k.jsxs(d("MWV2TabContainer").MWV2TabContainer,{tab:x,threadKey:A,children:[k.jsx(d("CometPageletWithDiv.react").Placeholder,{fallback:k.jsx(c("MWV2ChatTabHeaderLoadingWithGlimmers.react"),{tab:x}),name:"MWChatTabHeader",children:k.jsx(c("MWLSChatTabHeaderRoot.react"),{tab:x,threadKey:A})}),L]}),e[62]=L,e[63]=x,e[64]=A,e[65]=J):J=e[65];B=J;e[66]!==B||e[67]!==D||e[68]!==i||e[69]!==l||e[70]!==r||e[71]!==w||e[72]!==x?(K=D!=null?D:r&&c("MWOptimisticSecureThreadPreview.react")!=null?k.jsx(c("MWOptimisticSecureThreadPreview.react"),{otherContactIdForOptimisticSecureThread:i,tab:x}):w?k.jsx(c("MWOnDemandCutoverThreadPreview.react"),{otherContactIdForOnDemandCutoverThread:l,tab:x}):B,e[66]=B,e[67]=D,e[68]=i,e[69]=l,e[70]=r,e[71]=w,e[72]=x,e[73]=K):K=e[73];h=K;e[74]!==h?(f=k.jsx(d("MWV2ComposerHasContentContext.react").MWV2ComposerHasContentContextProvider,{children:k.jsx(d("MWInChatTabContextProvider.react").InChatTabContextProvider,{children:k.jsx(c("BaseHeadingContextWrapper.react"),{children:h})})}),e[74]=h,e[75]=f):f=e[75];e[76]!==f||e[77]!==z?(g=k.jsx(c("XPlatWebAudioPlaybackContextProvider.react"),{children:k.jsx(d("MWPVisibleMessageContext.react").MWPVisibleMessageContextProvider,{children:k.jsx(q,{themeFbid:z,children:f})})}),e[76]=f,e[77]=z,e[78]=g):g=e[78];e[79]!==g||e[80]!==E?(C=E(g),e[79]=g,e[80]=E,e[81]=C):C=e[81];e[82]!==C||e[83]!==A?(a=k.jsx(d("MWPThreadIsPage.react").Provider,{threadKey:A,children:C}),e[82]=C,e[83]=A,e[84]=a):a=e[84];return a}function s(){return k.jsx(c("MWV2ErrorComposer.react"),{})}s.displayName=s.name+" [from "+f.id+"]";function t(a){return k.jsx(c("CometMessagingChatTabErrorState.react"),{error:a})}t.displayName=t.name+" [from "+f.id+"]";function u(){return null}function v(a){return a.focusedTabId}function w(a,b){var e=d("react-compiler-runtime").c(12),g=d("MAWThreadCutover").useIsDualThreadCutoverOpenThread(a),i=(d("MAWThreadCutover").useIsCutoverOpenThread(a)||b!=null&&d("LSThreadBitOffset").has(128,b))&&!g;e[0]!==a?(b=(j||(j=d("I64"))).to_string(a),e[0]=a,e[1]=b):b=e[1];var k=d("MAWThreadCutover").useGetCutoverSecureThreadKey(b),l=(h||(h=c("useReStore")))(),m;e[2]!==k||e[3]!==l||e[4]!==i||e[5]!==a?(b=function(){if(!i)return;if(k==null)c("promiseDone")(c("LSPlatformWaitForTaskCompletion")(l,function(b){return c("LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure")(c("LSFactory")(b),{waJid:a})},"readwrite"));else{var b=d("MWChatInteraction").get((j||(j=d("I64"))).to_string(a));if(b!=null){var e;d("MWChatInteraction").set(k,b);(e=c("InteractionTracingMetrics")).addMetadata(b,"thread_id",k);e.addMetadata(b,"thread_type",15..toString());e.addMetadata(b,"is_secure",!0);e.addMetadata(b,"redirectedFromPreCutover",1)}}},m=[k,l,i,a],e[2]=k,e[3]=l,e[4]=i,e[5]=a,e[6]=b,e[7]=m):(b=e[6],m=e[7]);d("Int64Hooks").useEffectInt64(b,m);e[8]!==k||e[9]!==l?(b=function(){return k!=null?d("ReQL").fromTableAscending(l.tables.threads).getKeyRange((j||(j=d("I64"))).of_string(k)):d("ReQL").empty()},m=[l,k],e[8]=k,e[9]=l,e[10]=b,e[11]=m):(b=e[10],m=e[11]);e=d("ReQLSuspense").useFirst(b,m,f.id+":455");b=g?void 0:e;if(b!=null){m=d("LSThreadAttributionStore").getSourceWithoutReset(void 0,(j||(j=d("I64"))).to_string(a));m.type==="MWLSEntrypoint"&&m.value!=="unknown"&&d("LSThreadAttributionStore").setSource((j||(j=d("I64"))).to_string(b.threadKey),m.value)}return b}function a(a){var b,e=d("react-compiler-runtime").c(34),g=a.isMinimized,i=a.mawSecureThreadQPContainerQueryRef,j=a.mwChatTabInThreadBannerQueryRef,l=a.tab;a=a.threadKeyDescriptor;g=g===void 0?!1:g;var m=(h||(h=c("useReStore")))(),n=a.clientThreadKey,o=a.threadKey,p=a.threadLinkHash;d("MWV2EnsureThatChatTabExists").useMWV2EnsureThatChatTabExists(o,a.threadType,n,"MWV2ChatTab");e[0]!==m.tables.threads||e[1]!==o?(a=function(){return d("ReQL").fromTableAscending(m.tables.threads,["folderName","themeFbid","threadKey","threadType","parentThreadKey","threadSubtype","threadName","authorityLevel","cannotUnsendReason","threadStatus","cannotReplyReason","clientThreadKey","consistentThreadFbid","metadata"].concat(d("LSThreadBitOffset").threadCapabilityFields)).getKeyRange(o)},e[0]=m.tables.threads,e[1]=o,e[2]=a):a=e[2];var q;e[3]!==m||e[4]!==o?(q=[m,o],e[3]=m,e[4]=o,e[5]=q):q=e[5];a=d("ReQLSuspense").useFirst(a,q,f.id+":507");e[6]!==n||e[7]!==m.tables.threads?(q=function(){return n!=null?d("ReQL").fromTableAscending(m.tables.threads.index("clientThreadKey")).getKeyRange(n):d("ReQL").empty()},e[6]=n,e[7]=m.tables.threads,e[8]=q):q=e[8];var s;e[9]!==n||e[10]!==m?(s=[m,n],e[9]=n,e[10]=m,e[11]=s):s=e[11];q=d("ReQLSuspense").useFirst(q,s,f.id+":527");s=w(o,a);a=(s=s!=null?s:a)!=null?s:q;e[12]===Symbol["for"]("react.memo_cache_sentinel")?(s={shouldClearOldHiddenTab:!0,shouldUpdateThreadType:!0},e[12]=s):s=e[12];c("useMWChatStateUpdateThreadKeyDescriptorIfAuthoritative")(a,l,s);s=c("useCometSubscribeMessengerHasDefaultThreadOneToOneCapability")((q=a==null?void 0:a.threadKey)!=null?q:o,a==null?void 0:a.threadType);q=s[0];s=s[2];b=c("useCometSubscribeMessengerIsOnDemandCutoverEligible")((b=a==null?void 0:a.threadKey)!=null?b:o,a==null?void 0:a.threadType);var t=b[0];b=b[2];if(a!=null){var u=g?"mwchat-tab-wrapper-minimized":void 0,v=g?"hidden":"visible",x;e[13]!==q||e[14]!==a?(x=a!=null&&d("LSMessagingThreadTypeUtil").isOpenOneToOne(a.threadType)&&q,e[13]=q,e[14]=a,e[15]=x):x=e[15];e[16]!==t||e[17]!==a?(q=a!=null&&d("LSMessagingThreadTypeUtil").isOpenOneToOne(a.threadType)&&t,e[16]=t,e[17]=a,e[18]=q):q=e[18];e[19]!==s||e[20]!==g||e[21]!==i||e[22]!==j||e[23]!==b||e[24]!==q||e[25]!==x||e[26]!==l||e[27]!==p||e[28]!==a?(t=k.jsx(r,{isMinimized:g,mawSecureThreadQPContainerQueryRef:i,mwChatTabInThreadBannerQueryRef:j,otherContactIdForDefaultE2eeThread:s,otherContactIdForOnDemandCutover:b,shouldUseDefaultE2eeOneToOne:x,shouldUseOnDemandCutover:q,tab:l,thread:a,threadLinkHash:p}),e[19]=s,e[20]=g,e[21]=i,e[22]=j,e[23]=b,e[24]=q,e[25]=x,e[26]=l,e[27]=p,e[28]=a,e[29]=t):t=e[29];e[30]!==t||e[31]!==u||e[32]!==v?(s=k.jsx(c("LegacyHidden"),{"data-testid":void 0,mode:v,children:t}),e[30]=t,e[31]=u,e[32]=v,e[33]=s):s=e[33];return s}return null}e=l(a);g["default"]=e}),98);
__d("MWV2ChatTabRoot.react",["MWV2ChatTab.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(6),e=a.props;a=a.queries;var f=e.isMinimized,g=e.tab;e=e.threadKeyDescriptor;var h=a.mawSecureThreadQPContainerQueryRef;a=a.mwChatTabInThreadBannerQueryRef;var j;b[0]!==f||b[1]!==h||b[2]!==a||b[3]!==g||b[4]!==e?(j=i.jsx(c("MWV2ChatTab.react"),{isMinimized:f,mawSecureThreadQPContainerQueryRef:h,mwChatTabInThreadBannerQueryRef:a,tab:g,threadKeyDescriptor:e}),b[0]=f,b[1]=h,b[2]=a,b[3]=g,b[4]=e,b[5]=j):j=b[5];return j}g["default"]=a}),98);